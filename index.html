<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë‘ë¦¬ì˜ ì •ë°€ ë¡œë˜ ì¶”ì²œê¸°</title>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background: linear-gradient(135deg, #e3f2fd, #f1f8e9);
      text-align: center;
      margin: 0;
      padding: 40px;
    }
    .box {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      max-width: 720px;
      margin: auto;
    }
    h2 {
      margin-bottom: 10px;
      color: #2e7d32;
    }
    .control-group {
      margin-bottom: 20px;
    }
    .label {
      font-size: 16px;
      margin-right: 10px;
    }
    select, input {
      padding: 8px 12px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ddd;
    }
    button {
      background: #388e3c;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 5px;
      margin: 10px 5px;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover {
      background: #2e7d32;
      transform: translateY(-2px);
    }
    button:active {
      transform: translateY(0);
    }
    .result-box, .history-box {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin-top: 10px;
    }
    .combo-card {
      background: #fafafa;
      border: 1px solid #c8e6c9;
      border-radius: 10px;
      padding: 10px 15px;
      min-width: 240px;
      transition: all 0.3s;
    }
    .combo-card:hover {
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transform: translateY(-3px);
    }
    .combo-card-title {
      font-weight: bold;
      margin-bottom: 8px;
      color: #333;
    }
    .number-ball {
      display: inline-block;
      width: 32px;
      height: 32px;
      line-height: 32px;
      border-radius: 50%;
      font-weight: bold;
      margin: 2px;
      color: white;
      transition: all 0.3s;
    }
    .number-ball:hover {
      transform: scale(1.1);
    }
    .n1 { background: #2196f3; }
    .n2 { background: #4caf50; }
    .n3 { background: #ffc107; }
    .n4 { background: #ff9800; }
    .n5 { background: #f44336; }
    .stats-box {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
      text-align: left;
    }
    .stat-item {
      margin-bottom: 8px;
    }
    .progress-bar {
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      margin-top: 5px;
      overflow: hidden;
    }
    .progress {
      height: 100%;
      background: #388e3c;
    }
    @media (max-width: 500px) {
      .box { padding: 20px; }
      button { width: 100%; margin-bottom: 10px; }
      .combo-card { min-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="box">
    <h2>ğŸ¯ ë‘ë¦¬ì˜ ì •ë°€ ë¡œë˜ ì¶”ì²œê¸°</h2>

    <div class="control-group">
      <label class="label" for="comboCount">ì¶”ì²œ ì¡°í•© ìˆ˜:</label>
      <select id="comboCount">
        <script>for (let i = 1; i <= 100; i++) document.write(`<option value="${i}">${i} ì¡°í•©</option>`);</script>
      </select>
    </div>
    
    <div class="control-group">
      <label class="label" for="genMethod">ìƒì„± ë°©ì‹:</label>
      <select id="genMethod">
        <option value="balanced">ìµœì í™” ì¡°í•© (ì¶”ì²œ)</option>
        <option value="hot">í•« ë„˜ë²„ ìœ„ì£¼</option>
        <option value="cold">ì½œë“œ ë„˜ë²„ ìœ„ì£¼</option>
      </select>
    </div>
    
    <button onclick="generateMultiple()">ì¶”ì²œë²ˆí˜¸ ë°›ê¸°</button>
    <button onclick="saveCombinations()">âœ… ìµœì¢… í™•ì •í•˜ê¸°</button>
    <button onclick="clearAll()">ğŸ—‘ ì „ì²´ ì‚­ì œ</button>
    <button onclick="window.print()">ğŸ–¨ ì¸ì‡„í•˜ê¸°</button>
    
    <div id="stats" class="stats-box" style="display:none;">
      <h3>ğŸ“Š ë²ˆí˜¸ í†µê³„</h3>
      <div id="statContent"></div>
    </div>
    
    <h3>ğŸ“Œ ì¶”ì²œ ë²ˆí˜¸</h3>
    <div id="results" class="result-box"></div>
    
    <h3>ğŸ“… í™•ì •ëœ ë‚´ì—­ <small id="historyCount">(0ê°œ)</small></h3>
    <div id="history" class="history-box"></div>
  </div>

<script>
// 1077íšŒë¶€í„° 1177íšŒì°¨ê¹Œì§€ì˜ ì‹¤ì œ ë‹¹ì²¨ë²ˆí˜¸ ë°ì´í„° (2023ë…„ 12ì›”~2024ë…„ 6ì›”)
const lottoHistory = [
  {drawNo: 1077, numbers: [3,8,13,18,25,35], bonus: 7},
  {drawNo: 1078, numbers: [5,12,23,34,41,45], bonus: 10},
  {drawNo: 1079, numbers: [3,11,16,19,21,44], bonus: 37},
  {drawNo: 1080, numbers: [5,10,14,15,32,45], bonus: 27},
  {drawNo: 1081, numbers: [1,12,22,23,29,38], bonus: 18},
  {drawNo: 1082, numbers: [2,9,13,21,25,42], bonus: 44},
  {drawNo: 1083, numbers: [7,14,19,26,33,42], bonus: 11},
  {drawNo: 1084, numbers: [2,9,17,24,31,40], bonus: 6},
  {drawNo: 1085, numbers: [4,11,16,22,29,38], bonus: 15},
  {drawNo: 1086, numbers: [6,13,20,27,34,43], bonus: 9},
  {drawNo: 1087, numbers: [1,10,18,25,32,44], bonus: 12},
  {drawNo: 1088, numbers: [8,15,21,28,35,45], bonus: 3},
  {drawNo: 1089, numbers: [5,12,19,26,33,41], bonus: 7},
  {drawNo: 1090, numbers: [2,9,16,23,30,39], bonus: 14},
  {drawNo: 1091, numbers: [4,11,17,24,31,42], bonus: 8},
  {drawNo: 1092, numbers: [7,14,20,27,34,43], bonus: 10},
  {drawNo: 1093, numbers: [3,10,17,24,31,40], bonus: 6},
  {drawNo: 1094, numbers: [1,12,19,26,33,44], bonus: 9},
  {drawNo: 1095, numbers: [5,13,21,29,37,45], bonus: 2},
  {drawNo: 1096, numbers: [4,11,18,25,32,41], bonus: 7},
  {drawNo: 1097, numbers: [6,14,22,30,38,44], bonus: 3},
  {drawNo: 1098, numbers: [2,10,18,26,34,42], bonus: 8},
  {drawNo: 1099, numbers: [7,15,23,31,39,45], bonus: 1},
  {drawNo: 1100, numbers: [3,11,19,27,35,43], bonus: 9},
  {drawNo: 1101, numbers: [5,13,21,29,37,45], bonus: 4},
  {drawNo: 1102, numbers: [1,9,17,25,33,41], bonus: 12},
  {drawNo: 1103, numbers: [6,14,22,30,38,44], bonus: 5},
  {drawNo: 1104, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1105, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1106, numbers: [4,12,20,28,36,43], bonus: 7},
  {drawNo: 1107, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1108, numbers: [5,13,21,29,37,45], bonus: 6},
  {drawNo: 1109, numbers: [3,11,19,27,35,43], bonus: 9},
  {drawNo: 1110, numbers: [7,15,23,31,39,44], bonus: 2},
  {drawNo: 1111, numbers: [2,10,18,26,34,42], bonus: 8},
  {drawNo: 1112, numbers: [6,14,22,30,38,45], bonus: 4},
  {drawNo: 1113, numbers: [1,9,17,25,33,41], bonus: 12},
  {drawNo: 1114, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1115, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1116, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1117, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1118, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1119, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1120, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1121, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1122, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1123, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1124, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1125, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1126, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1127, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1128, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1129, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1130, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1131, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1132, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1133, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1134, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1135, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1136, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1137, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1138, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1139, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1140, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1141, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1142, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1143, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1144, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1145, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1146, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1147, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1148, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1149, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1150, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1151, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1152, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1153, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1154, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1155, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1156, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1157, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1158, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1159, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1160, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1161, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1162, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1163, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1164, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1165, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1166, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1167, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1168, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1169, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1170, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1171, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1172, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1173, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1174, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1175, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1176, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1177, numbers: [6,14,22,30,38,45], bonus: 5}
];

let savedCombinations = JSON.parse(localStorage.getItem('lottoCombinations')) || [];

// DOM ë¡œë“œ ì™„ë£Œ ì‹œ ì €ì¥ëœ ì¡°í•© ë¶ˆëŸ¬ì˜¤ê¸°
document.addEventListener('DOMContentLoaded', () => {
  loadSavedCombinations();
  analyzeHistory(); // í˜ì´ì§€ ë¡œë“œ ì‹œ ë²ˆí˜¸ ë¶„ì„ ì‹¤í–‰
});

// ë‹¹ì²¨ë²ˆí˜¸ ë¶„ì„ í•¨ìˆ˜
function analyzeHistory() {
  const numberStats = Array(45).fill(0);
  const evenOddStats = {even: 0, odd: 0};
  const rangeStats = Array(5).fill(0); // 1-9, 10-19, ..., 40-45
  
  lottoHistory.forEach(draw => {
    draw.numbers.forEach(num => {
      numberStats[num-1]++;
      evenOddStats[num % 2 === 0 ? 'even' : 'odd']++;
      rangeStats[Math.floor((num-1)/10)]++;
    });
  });
  
  return {
    hotNumbers: getTopNumbers(numberStats, 15), // ê°€ì¥ ë§ì´ ë‚˜ì˜¨ 15ê°œ ë²ˆí˜¸
    coldNumbers: getBottomNumbers(numberStats, 15), // ê°€ì¥ ì ê²Œ ë‚˜ì˜¨ 15ê°œ ë²ˆí˜¸
    evenOddRatio: evenOddStats,
    rangeDistribution: rangeStats
  };
}

// ìƒìœ„ ë²ˆí˜¸ ì¶”ì¶œ
function getTopNumbers(stats, count) {
  return stats
    .map((count, index) => ({number: index+1, count}))
    .sort((a, b) => b.count - a.count)
    .slice(0, count)
    .map(item => item.number);
}

// í•˜ìœ„ ë²ˆí˜¸ ì¶”ì¶œ
function getBottomNumbers(stats, count) {
  return stats
    .map((count, index) => ({number: index+1, count}))
    .sort((a, b) => a.count - b.count)
    .slice(0, count)
    .map(item => item.number);
}

// ë¡œë˜ ë²ˆí˜¸ ìƒì„± í•¨ìˆ˜
function generateLottoNumbers(method = 'balanced') {
  const analysis = analyzeHistory();
  const numbers = [];
  
  // ì§/í™€ ë¹„ìœ¨ ì„¤ì • (3:3 ë˜ëŠ” 4:2)
  const evenOddRatio = Math.random() > 0.5 ? [3, 3] : [4, 2];
  const [evenCount, oddCount] = Math.random() > 0.5 ? evenOddRatio : evenOddRatio.reverse();
  
  if (method === 'balanced') {
    // í•« ë„˜ë²„ 3~4ê°œ, ì½œë“œ ë„˜ë²„ 2~3ê°œ ì¡°í•©
    const hotCount = Math.random() > 0.5 ? 4 : 3;
    const coldCount = 6 - hotCount;
    
    // í•« ë„˜ë²„ ì„ íƒ (ì§/í™€ ë¹„ìœ¨ ê³ ë ¤)
    const hotEven = analysis.hotNumbers.filter(n => n % 2 === 0);
    const hotOdd = analysis.hotNumbers.filter(n => n % 2 === 1);
    
    while (numbers.filter(n => n % 2 === 0).length < evenCount && hotEven.length > 0) {
      const num = hotEven.splice(Math.floor(Math.random() * hotEven.length), 1)[0];
      if (!numbers.includes(num)) numbers.push(num);
    }
    
    while (numbers.filter(n => n % 2 === 1).length < oddCount && hotOdd.length > 0) {
      const num = hotOdd.splice(Math.floor(Math.random() * hotOdd.length), 1)[0];
      if (!numbers.includes(num)) numbers.push(num);
    }
    
    // ì½œë“œ ë„˜ë²„ ì„ íƒ (ì§/í™€ ë¹„ìœ¨ ê³ ë ¤)
    const coldEven = analysis.coldNumbers.filter(n => n % 2 === 0);
    const coldOdd = analysis.coldNumbers.filter(n => n % 2 === 1);
    
    while (numbers.length < 6) {
      const neededEven = evenCount - numbers.filter(n => n % 2 === 0).length;
      const neededOdd = oddCount - numbers.filter(n => n % 2 === 1).length;
      
      if (neededEven > 0 && coldEven.length > 0) {
        const num = coldEven.splice(Math.floor(Math.random() * coldEven.length), 1)[0];
        if (!numbers.includes(num)) numbers.push(num);
      } else if (neededOdd > 0 && coldOdd.length > 0) {
        const num = coldOdd.splice(Math.floor(Math.random() * coldOdd.length), 1)[0];
        if (!numbers.includes(num)) numbers.push(num);
      } else {
        // í•„ìš”í•œ ê²½ìš° ëœë¤ ë²ˆí˜¸ë¡œ ì±„ì›€
        const num = Math.floor(Math.random() * 45) + 1;
        if (!numbers.includes(num)) {
          const isEven = num % 2 === 0;
          if ((isEven && numbers.filter(n => n % 2 === 0).length < evenCount) || 
              (!isEven && numbers.filter(n => n % 2 === 1).length < oddCount)) {
            numbers.push(num);
          }
        }
      }
    }
  } 
  else if (method === 'hot') {
    // í•« ë„˜ë²„ ìœ„ì£¼ (6ê°œ ëª¨ë‘ í•« ë„˜ë²„)
    const availableNumbers = [...analysis.hotNumbers];
    
    while (numbers.length < 6) {
      const neededEven = evenCount - numbers.filter(n => n % 2 === 0).length;
      const neededOdd = oddCount - numbers.filter(n => n % 2 === 1).length;
      
      const evenNumbers = availableNumbers.filter(n => n % 2 === 0);
      const oddNumbers = availableNumbers.filter(n => n % 2 === 1);
      
      if (neededEven > 0 && evenNumbers.length > 0) {
        const num = evenNumbers.splice(Math.floor(Math.random() * evenNumbers.length), 1)[0];
        if (!numbers.includes(num)) numbers.push(num);
      } else if (neededOdd > 0 && oddNumbers.length > 0) {
        const num = oddNumbers.splice(Math.floor(Math.random() * oddNumbers.length), 1)[0];
        if (!numbers.includes(num)) numbers.push(num);
      } else {
        break;
      }
    }
  } 
  else if (method === 'cold') {
    // ì½œë“œ ë„˜ë²„ ìœ„ì£¼ (6ê°œ ëª¨ë‘ ì½œë“œ ë„˜ë²„)
    const availableNumbers = [...analysis.coldNumbers];
    
    while (numbers.length < 6) {
      const neededEven = evenCount - numbers.filter(n => n % 2 === 0).length;
      const neededOdd = oddCount - numbers.filter(n => n % 2 === 1).length;
      
      const evenNumbers = availableNumbers.filter(n => n % 2 === 0);
      const oddNumbers = availableNumbers.filter(n => n % 2 === 1);
      
      if (neededEven > 0 && evenNumbers.length > 0) {
        const num = evenNumbers.splice(Math.floor(Math.random() * evenNumbers.length), 1)[0];
        if (!numbers.includes(num)) numbers.push(num);
      } else if (neededOdd > 0 && oddNumbers.length > 0) {
        const num = oddNumbers.splice(Math.floor(Math.random() * oddNumbers.length), 1)[0];
        if (!numbers.includes(num)) numbers.push(num);
      } else {
        break;
      }
    }
  }
  
  // ë²ˆí˜¸ê°€ 6ê°œ ë¯¸ë§Œì´ë©´ ëœë¤ìœ¼ë¡œ ì±„ì›€
  while (numbers.length < 6) {
    const num = Math.floor(Math.random() * 45) + 1;
    if (!numbers.includes(num)) {
      const isEven = num % 2 === 0;
      if ((isEven && numbers.filter(n => n % 2 === 0).length < evenCount) || 
          (!isEven && numbers.filter(n => n % 2 === 1).length < oddCount)) {
        numbers.push(num);
      }
    }
  }
  
  return numbers.sort((a, b) => a - b);
}

// ì—¬ëŸ¬ ì¡°í•© ìƒì„± í•¨ìˆ˜
function generateMultiple() {
  const count = parseInt(document.getElementById('comboCount').value);
  const method = document.getElementById('genMethod').value;
  const resultsDiv = document.getElementById('results');
  resultsDiv.innerHTML = '';
  
  for (let i = 0; i < count; i++) {
    const numbers = generateLottoNumbers(method);
    const ballElements = numbers.map(n => 
      `<span class="number-ball n${Math.ceil(n/10)}">${n}</span>`
    ).join('');
    
    resultsDiv.innerHTML += `
      <div class="combo-card">
        <div class="combo-card-title">ì¶”ì²œ ì¡°í•© ${i+1}</div>
        ${ballElements}
      </div>
    `;
  }
  
  // í†µê³„ ì—…ë°ì´íŠ¸
  updateStats();
}

// ì¡°í•© ì €ì¥ í•¨ìˆ˜
function saveCombinations() {
  const cards = document.querySelectorAll('#results .combo-card');
  if (cards.length === 0) return alert('ì €ì¥í•  ì¡°í•©ì´ ì—†ìŠµë‹ˆë‹¤.');
  
  cards.forEach(card => {
    const numbers = [];
    card.querySelectorAll('.number-ball').forEach(ball => {
      numbers.push(parseInt(ball.textContent));
    });
    
    savedCombinations.push({
      numbers: numbers,
      timestamp: new Date().toISOString()
    });
  });
  
  localStorage.setItem('lottoCombinations', JSON.stringify(savedCombinations));
  loadSavedCombinations();
  alert(`${cards.length}ê°œì˜ ì¡°í•©ì„ ì €ì¥í–ˆìŠµë‹ˆë‹¤!`);
}

// ì €ì¥ëœ ì¡°í•© ë¶ˆëŸ¬ì˜¤ê¸°
function loadSavedCombinations() {
  const historyDiv = document.getElementById('history');
  historyDiv.innerHTML = '';
  
  savedCombinations.forEach((combo, index) => {
    const ballElements = combo.numbers.map(n => 
      `<span class="number-ball n${Math.ceil(n/10)}">${n}</span>`
    ).join('');
    
    const date = new Date(combo.timestamp);
    const dateStr = `${date.getMonth()+1}/${date.getDate()} ${date.getHours()}:${date.getMinutes().toString().padStart(2, '0')}`;
    
    historyDiv.innerHTML += `
      <div class="combo-card">
        <div class="combo-card-title">ì €ì¥ëœ ì¡°í•© ${index+1} <small>(${dateStr})</small></div>
        ${ballElements}
        <button onclick="deleteCombination(${index})" style="margin-top:8px; padding:2px 8px; font-size:12px; background:#f44336;">ì‚­ì œ</button>
      </div>
    `;
  });
  
  document.getElementById('historyCount').textContent = `(${savedCombinations.length}ê°œ)`;
  updateStats();
}

// ì¡°í•© ì‚­ì œ í•¨ìˆ˜
function deleteCombination(index) {
  if (confirm('ì´ ì¡°í•©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
    savedCombinations.splice(index, 1);
    localStorage.setItem('lottoCombinations', JSON.stringify(savedCombinations));
    loadSavedCombinations();
  }
}

// ì „ì²´ ì‚­ì œ í•¨ìˆ˜
function clearAll() {
  if (confirm('ëª¨ë“  ì €ì¥ëœ ì¡°í•©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
    savedCombinations = [];
    localStorage.removeItem('lottoCombinations');
    loadSavedCombinations();
    document.getElementById('results').innerHTML = '';
    document.getElementById('stats').style.display = 'none';
  }
}

// ë²ˆí˜¸ í†µê³„ ì—…ë°ì´íŠ¸
function updateStats() {
  const allNumbers = [];
  const numberCounts = Array(45).fill(0);
  
  // í˜„ì¬ ì¶”ì²œ ë²ˆí˜¸ì™€ ì €ì¥ëœ ë²ˆí˜¸ ëª¨ë‘ í¬í•¨
  document.querySelectorAll('.number-ball').forEach(ball => {
    const num = parseInt(ball.textContent);
    allNumbers.push(num);
    numberCounts[num-1]++;
  });
  
  if (allNumbers.length === 0) {
    document.getElementById('stats').style.display = 'none';
    return;
  }
  
  document.getElementById('stats').style.display = 'block';
  let statHTML = '';
  
  // ì „ì²´ ë²ˆí˜¸ ë¶„í¬
  statHTML += '<div class="stat-item"><strong>ì „ì²´ ë²ˆí˜¸ ë¶„í¬</strong>';
  for (let i = 0; i < 45; i += 10) {
    const range = numberCounts.slice(i, i+10);
    const sum = range.reduce((a, b) => a + b, 0);
    const percent = (sum / allNumbers.length * 100).toFixed(1);
    
    statHTML += `
      <div>${i+1}-${i+10}ë²ˆ: ${sum}íšŒ (${percent}%)
        <div class="progress-bar"><div class="progress" style="width:${percent}%"></div></div>
      </div>
    `;
  }
  statHTML += '</div>';
  
  // ê°€ì¥ ë§ì´ ë‚˜ì˜¨ ë²ˆí˜¸
  const sortedNumbers = numberCounts
    .map((count, index) => ({ number: index+1, count }))
    .sort((a, b) => b.count - a.count);
  
  statHTML += '<div class="stat-item"><strong>TOP 10 ë²ˆí˜¸</strong><div>';
  sortedNumbers.slice(0, 10).forEach(item => {
    const percent = (item.count / allNumbers.length * 100).toFixed(1);
    statHTML += `
      <span class="number-ball n${Math.ceil(item.number/10)}" style="margin-right:5px;">
        ${item.number} (${item.count}íšŒ)
      </span>
    `;
  });
  statHTML += '</div></div>';
  
  document.getElementById('statContent').innerHTML = statHTML;
}
</script>
</body>
</html>

