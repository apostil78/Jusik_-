<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>시기의 PREMIUM Lotto - 1178회 추천</title>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* CSS는 동일하게 유지 */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Pretendard', sans-serif;
      background: linear-gradient(135deg, #e0f7fa, #bbdefb);
      text-align: center;
      margin: 0;
      padding: 20px;
      color: #333;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    /* ... (기존 CSS 유지) ... */
  </style>
</head>
<body>
  <div class="container">
    <div class="header box">
      <h1>시기의 PREMIUM Lotto</h1>
      <div class="subtitle">
        1178회 강력추천 모드 <span class="power-mode">ACTIVE</span>
      </div>
      
      <div class="filter-info">
        <h3>적용된 고급 필터</h3>
        <div class="filters">
          <span class="filter-item">짝/홀 비율 최적화</span>
          <span class="filter-item">핫/콜드 넘버 조합</span>
          <span class="filter-item">번호대 균형 조정</span>
          <span class="filter-item">동적 합계 범위</span>
          <span class="filter-item">연속 번호 제한</span>
        </div>
      </div>
    </div>
    
    <div class="box">
      <div class="controls">
        <div class="control-group">
          <span class="label">추천 조합 수:</span>
          <select id="comboCount">
            <option value="5">5 조합</option>
            <option value="10" selected>10 조합</option>
            <option value="20">20 조합</option>
            <option value="30">30 조합</option>
          </select>
        </div>
      </div>
      
      <div class="buttons">
        <button onclick="generateNumbers()">
          <i>🎰</i> PREMIUM 추천
        </button>
        <button onclick="saveCombinations()">
          <i>💾</i> 조합 저장
        </button>
        <button onclick="showCombinationHistory()">
          <i>📋</i> 조합내역보기
        </button>
        <button onclick="clearAll()">
          <i>🗑️</i> 전체 삭제
        </button>
      </div>
    </div>
    
    <div class="box">
      <h3 class="section-title">📌 1178회 추천 번호 조합</h3>
      <div id="results" class="result-box"></div>
    </div>
    
    <div class="box">
      <h3 class="section-title">📅 저장된 조합 <span id="historyCount" class="history-count">0</span></h3>
      <div id="history" class="history-box"></div>
    </div>
    
    <div class="footer">
      <p>* 강력추천 모드: 최근 100회 당첨번호를 분석하여 모든 고급 필터를 적용한 번호를 생성합니다</p>
      <p>* 1177회 추첨일: 2025년 6월 21일 (토)</p>
    </div>
  </div>

  <!-- 조합 내역 보기 모달 -->
  <div id="historyModal" class="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal()">&times;</span>
      <h2 class="section-title" style="margin-top: 0;">📋 조합 내역보기 (1178회 기준)</h2>
      
      <!-- 당첨번호 섹션 제거됨 -->
      
      <div id="historyContent"></div>
    </div>
  </div>

  <script>
    // 1078회~1177회 실제 당첨번호 데이터 (1177회: 2025년 6월 21일)
    const lottoHistory = [
      {drawNo: 1078, numbers: [6,10,11,14,36,38], bonus: 43},
      // ... (기존 데이터 유지) ...
      {drawNo: 1177, numbers: [3,7,15,16,19,43], bonus: 21}
    ];

    let savedCombinations = JSON.parse(localStorage.getItem('lottoCombinations')) || [];
    let analysisResults = {};

    // DOM 로드 완료 시 실행
    document.addEventListener('DOMContentLoaded', () => {
      analysisResults = analyzeHistory();
      loadSavedCombinations();
    });

    // 당첨번호 분석 함수 (최근 100회) - 유지
    function analyzeHistory() {
      // ... (기존 분석 로직 유지) ...
    }

    // 번호 생성 함수 - 유지
    function generateNumbers() {
      // ... (기존 번호 생성 로직 유지) ...
    }

    // 단일 번호 세트 생성 - 유지
    function generateSingleNumberSet(useEvenOdd, useHotCold, useRange) {
      // ... (기존 로직 유지) ...
    }

    // 번호 세트 유효성 검사 - 유지
    function validateNumberSet(numbers, useSum, useConsecutive) {
      // ... (기존 로직 유지) ...
    }

    // 대체 번호 생성 - 유지
    function generateFallbackNumberSet() {
      // ... (기존 로직 유지) ...
    }
    
    // 조합 저장 기능 - 유지
    function saveCombinations() {
      // ... (기존 로직 유지) ...
    }

    // 저장된 조합 로드 - 유지
    function loadSavedCombinations() {
      // ... (기존 로직 유지) ...
    }

    // 조합 삭제 - 유지
    function deleteCombination(index) {
      // ... (기존 로직 유지) ...
    }

    // 전체 삭제 - 유지
    function clearAll() {
      // ... (기존 로직 유지) ...
    }
    
    // 조합 내역 보기 (수정됨)
    function showCombinationHistory() {
      if (savedCombinations.length === 0) {
        alert('저장된 조합이 없습니다.');
        return;
      }
      
      const modal = document.getElementById('historyModal');
      const historyContent = document.getElementById('historyContent');
      
      historyContent.innerHTML = '';
      
      // 간결한 조합 목록만 표시
      savedCombinations.forEach((combo, index) => {
        const ballElements = combo.map(n => 
          `<div class="number-ball n${Math.ceil(n/10)}">${n}</div>`
        ).join('');
        
        historyContent.innerHTML += `
          <div class="history-item">
            <div class="combo-card-title">저장된 조합 ${index+1}</div>
            <div class="numbers">${ballElements}</div>
          </div>
        `;
      });
      
      modal.style.display = 'flex';
    }
    
    // 모달 닫기 - 유지
    function closeModal() {
      document.getElementById('historyModal').style.display = 'none';
    }
  </script>
</body>
</html>
