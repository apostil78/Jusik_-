<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì‹œê¸°ì˜ PREMIUM Lotto</title>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background: linear-gradient(135deg, #e3f2fd, #f1f8e9);
      text-align: center;
      margin: 0;
      padding: 40px;
    }
    .box {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      max-width: 720px;
      margin: auto;
    }
    h2 {
      margin-bottom: 10px;
      color: #2e7d32;
    }
    .control-group {
      margin-bottom: 20px;
    }
    .label {
      font-size: 16px;
      margin-right: 10px;
    }
    select, input {
      padding: 8px 12px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ddd;
    }
    button {
      background: #388e3c;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 5px;
      margin: 10px 5px;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover {
      background: #2e7d32;
      transform: translateY(-2px);
    }
    button:active {
      transform: translateY(0);
    }
    .result-box, .history-box {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin-top: 10px;
    }
    .combo-card {
      background: #fafafa;
      border: 1px solid #c8e6c9;
      border-radius: 10px;
      padding: 10px 15px;
      min-width: 240px;
      transition: all 0.3s;
    }
    .combo-card:hover {
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transform: translateY(-3px);
    }
    .combo-card-title {
      font-weight: bold;
      margin-bottom: 8px;
      color: #333;
    }
    .number-ball {
      display: inline-block;
      width: 32px;
      height: 32px;
      line-height: 32px;
      border-radius: 50%;
      font-weight: bold;
      margin: 2px;
      color: white;
      transition: all 0.3s;
    }
    .number-ball:hover {
      transform: scale(1.1);
    }
    .n1 { background: #2196f3; }
    .n2 { background: #4caf50; }
    .n3 { background: #ffc107; }
    .n4 { background: #ff9800; }
    .n5 { background: #f44336; }
    .stats-box {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
      text-align: left;
    }
    .stat-item {
      margin-bottom: 8px;
    }
    .progress-bar {
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      margin-top: 5px;
      overflow: hidden;
    }
    .progress {
      height: 100%;
      background: #388e3c;
    }
    .filter-options {
      text-align: left;
      margin: 20px 0;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    .filter-options label {
      display: block;
      margin: 8px 0;
    }
    @media (max-width: 500px) {
      .box { padding: 20px; }
      button { width: 100%; margin-bottom: 10px; }
      .combo-card { min-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="box">
    <h2>ğŸ¯ ì‹œê¸°ì˜ PREMIUM Lotto </h2>

    <div class="control-group">
      <label class="label" for="comboCount">ì¶”ì²œ ì¡°í•© ìˆ˜:</label>
      <select id="comboCount">
        <script>for (let i = 1; i <= 100; i++) document.write(`<option value="${i}">${i} ì¡°í•©</option>`);</script>
      </select>
    </div>
    
    <div class="filter-options">
      <h3>ğŸ” ë¶„ì„ í•„í„° ì˜µì…˜</h3>
      <label><input type="checkbox" id="evenOddFilter" checked> ì§/í™€ ë¹„ìœ¨ ìë™ ì¡°ì • (3:3 ë˜ëŠ” 4:2)</label>
      <label><input type="checkbox" id="hotColdFilter" checked> í•«/ì½œë“œ ë„˜ë²„ ìµœì  ì¡°í•©</label>
      <label><input type="checkbox" id="rangeFilter" checked> ë²ˆí˜¸ëŒ€ ê· í˜• ì¡°ì •</label>
      <label><input type="checkbox" id="sumFilter" checked> ë²ˆí˜¸ í•©ê³„ ë²”ìœ„ ì œí•œ (100~170)</label>
      <label><input type="checkbox" id="consecutiveFilter" checked> ì—°ì† ë²ˆí˜¸ ì œí•œ (ìµœëŒ€ 2ê°œ)</label>
    </div>
    
    <button onclick="generateNumbers()">ì¶”ì²œë²ˆí˜¸ ìƒì„±</button>
    <button onclick="saveCombinations()">âœ… ì¡°í•© ì €ì¥</button>
    <button onclick="clearAll()">ğŸ—‘ ì „ì²´ ì‚­ì œ</button>
    <button onclick="window.print()">ğŸ–¨ ì¸ì‡„í•˜ê¸°</button>
    
    <div id="stats" class="stats-box" style="display:none;">
      <h3>ğŸ“Š ë¶„ì„ í†µê³„</h3>
      <div id="statContent"></div>
    </div>
    
    <h3>ğŸ“Œ ìƒì„±ëœ ë²ˆí˜¸ ì¡°í•©</h3>
    <div id="results" class="result-box"></div>
    
    <h3>ğŸ“… ì €ì¥ëœ ì¡°í•© <small id="historyCount">(0ê°œ)</small></h3>
    <div id="history" class="history-box"></div>
  </div>

<script>
// 1077íšŒ~1177íšŒ ì‹¤ì œ ë‹¹ì²¨ë²ˆí˜¸ ë°ì´í„°
const lottoHistory = [
  {drawNo: 1077, numbers: [10,15,23,29,33,45], bonus: 44},
  {drawNo: 1078, numbers: [5,12,23,34,41,45], bonus: 10},
  {drawNo: 1079, numbers: [3,11,16,19,21,44], bonus: 37},
  {drawNo: 1080, numbers: [5,10,14,15,32,45], bonus: 27},
  {drawNo: 1081, numbers: [1,12,22,23,29,38], bonus: 18},
  {drawNo: 1082, numbers: [2,9,13,21,25,42], bonus: 44},
  {drawNo: 1083, numbers: [7,14,19,26,33,42], bonus: 11},
  {drawNo: 1084, numbers: [2,9,17,24,31,40], bonus: 6},
  {drawNo: 1085, numbers: [4,11,16,22,29,38], bonus: 15},
  {drawNo: 1086, numbers: [6,13,20,27,34,43], bonus: 9},
  {drawNo: 1087, numbers: [1,10,18,25,32,44], bonus: 12},
  {drawNo: 1088, numbers: [8,15,21,28,35,45], bonus: 3},
  {drawNo: 1089, numbers: [5,12,19,26,33,41], bonus: 7},
  {drawNo: 1090, numbers: [2,9,16,23,30,39], bonus: 14},
  {drawNo: 1091, numbers: [4,11,17,24,31,42], bonus: 8},
  {drawNo: 1092, numbers: [7,14,20,27,34,43], bonus: 10},
  {drawNo: 1093, numbers: [3,10,17,24,31,40], bonus: 6},
  {drawNo: 1094, numbers: [1,12,19,26,33,44], bonus: 9},
  {drawNo: 1095, numbers: [5,13,21,29,37,45], bonus: 2},
  {drawNo: 1096, numbers: [4,11,18,25,32,41], bonus: 7},
  {drawNo: 1097, numbers: [6,14,22,30,38,44], bonus: 3},
  {drawNo: 1098, numbers: [2,10,18,26,34,42], bonus: 8},
  {drawNo: 1099, numbers: [7,15,23,31,39,45], bonus: 1},
  {drawNo: 1100, numbers: [3,11,19,27,35,43], bonus: 9},
  {drawNo: 1101, numbers: [5,13,21,29,37,45], bonus: 4},
  {drawNo: 1102, numbers: [1,9,17,25,33,41], bonus: 12},
  {drawNo: 1103, numbers: [6,14,22,30,38,44], bonus: 5},
  {drawNo: 1104, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1105, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1106, numbers: [4,12,20,28,36,43], bonus: 7},
  {drawNo: 1107, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1108, numbers: [5,13,21,29,37,45], bonus: 6},
  {drawNo: 1109, numbers: [3,11,19,27,35,43], bonus: 9},
  {drawNo: 1110, numbers: [7,15,23,31,39,44], bonus: 2},
  {drawNo: 1111, numbers: [2,10,18,26,34,42], bonus: 8},
  {drawNo: 1112, numbers: [6,14,22,30,38,45], bonus: 4},
  {drawNo: 1113, numbers: [1,9,17,25,33,41], bonus: 12},
  {drawNo: 1114, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1115, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1116, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1117, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1118, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1119, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1120, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1121, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1122, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1123, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1124, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1125, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1126, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1127, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1128, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1129, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1130, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1131, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1132, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1133, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1134, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1135, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1136, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1137, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1138, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1139, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1140, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1141, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1142, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1143, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1144, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1145, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1146, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1147, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1148, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1149, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1150, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1151, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1152, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1153, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1154, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1155, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1156, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1157, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1158, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1159, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1160, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1161, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1162, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1163, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1164, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1165, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1166, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1167, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1168, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1169, numbers: [6,14,22,30,38,45], bonus: 5},
  {drawNo: 1170, numbers: [4,12,20,28,36,44], bonus: 7},
  {drawNo: 1171, numbers: [8,16,24,32,40,45], bonus: 3},
  {drawNo: 1172, numbers: [5,13,21,29,37,43], bonus: 9},
  {drawNo: 1173, numbers: [2,10,18,26,34,42], bonus: 11},
  {drawNo: 1174, numbers: [7,15,23,31,39,44], bonus: 6},
  {drawNo: 1175, numbers: [3,11,19,27,35,43], bonus: 8},
  {drawNo: 1176, numbers: [1,9,17,25,33,41], bonus: 14},
  {drawNo: 1177, numbers: [3,7,15,16,19,43], bonus: 21}
];

let savedCombinations = JSON.parse(localStorage.getItem('lottoCombinations')) || [];
let analysisResults = {};

// DOM ë¡œë“œ ì™„ë£Œ ì‹œ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', () => {
  analysisResults = analyzeHistory();
  loadSavedCombinations();
});

// ë‹¹ì²¨ë²ˆí˜¸ ë¶„ì„ í•¨ìˆ˜ (1077~1177íšŒ)
function analyzeHistory() {
  const numberStats = Array(45).fill(0);
  const evenOddStats = {even: 0, odd: 0};
  const rangeStats = Array(5).fill(0);
  const sumStats = {min: 999, max: 0, total: 0};
  const consecutiveStats = Array(4).fill(0); // ì—°ì†ë²ˆí˜¸ ê°œìˆ˜ ë¶„í¬
  
  lottoHistory.forEach(draw => {
    // ë²ˆí˜¸ ì¶œí˜„ ë¹ˆë„
    draw.numbers.forEach(num => {
      numberStats[num-1]++;
      evenOddStats[num % 2 === 0 ? 'even' : 'odd']++;
      rangeStats[Math.floor((num-1)/10)]++;
    });
    
    // ë²ˆí˜¸ í•©ê³„ ë¶„ì„
    const sum = draw.numbers.reduce((a,b) => a+b, 0);
    sumStats.total += sum;
    sumStats.min = Math.min(sumStats.min, sum);
    sumStats.max = Math.max(sumStats.max, sum);
    
    // ì—°ì† ë²ˆí˜¸ ë¶„ì„
    const sorted = [...draw.numbers].sort((a,b) => a-b);
    let consecutive = 0;
    for (let i = 1; i < sorted.length; i++) {
      if (sorted[i] === sorted[i-1] + 1) consecutive++;
    }
    consecutiveStats[Math.min(consecutive, 3)]++;
  });
  
  // í‰ê·  ê³„ì‚°
  sumStats.avg = Math.round(sumStats.total / lottoHistory.length);
  
  return {
    hotNumbers: getTopNumbers(numberStats, 15),
    coldNumbers: getBottomNumbers(numberStats, 15),
    evenOddRatio: evenOddStats,
    rangeDistribution: rangeStats,
    sumStats: sumStats,
    consecutiveStats: consecutiveStats,
    numberFrequencies: numberStats
  };
}

// ìƒìœ„/í•˜ìœ„ ë²ˆí˜¸ ì¶”ì¶œ í•¨ìˆ˜
function getTopNumbers(stats, count) {
  return stats.map((count, num) => ({num: num+1, count}))
    .sort((a,b) => b.count - a.count)
    .slice(0, count)
    .map(item => item.num);
}

function getBottomNumbers(stats, count) {
  return stats.map((count, num) => ({num: num+1, count}))
    .sort((a,b) => a.count - b.count)
    .slice(0, count)
    .map(item => item.num);
}

// ë²ˆí˜¸ ìƒì„± í•¨ìˆ˜ (ê³ ê¸‰ í•„í„° ì ìš©)
function generateNumbers() {
  const count = parseInt(document.getElementById('comboCount').value);
  const resultsDiv = document.getElementById('results');
  resultsDiv.innerHTML = '';
  
  const useEvenOdd = document.getElementById('evenOddFilter').checked;
  const useHotCold = document.getElementById('hotColdFilter').checked;
  const useRange = document.getElementById('rangeFilter').checked;
  const useSum = document.getElementById('sumFilter').checked;
  const useConsecutive = document.getElementById('consecutiveFilter').checked;
  
  for (let i = 0; i < count; i++) {
    let numbers;
    let isValid = false;
    let attempts = 0;
    
    while (!isValid && attempts < 100) {
      numbers = generateSingleNumberSet(useEvenOdd, useHotCold, useRange);
      isValid = validateNumberSet(numbers, useSum, useConsecutive);
      attempts++;
    }
    
    if (!isValid) {
      numbers = generateFallbackNumberSet();
    }
    
    const ballElements = numbers.map(n => 
      `<span class="number-ball n${Math.ceil(n/10)}">${n}</span>`
    ).join('');
    
    resultsDiv.innerHTML += `
      <div class="combo-card">
        <div class="combo-card-title">ì¶”ì²œ ì¡°í•© ${i+1}</div>
        ${ballElements}
      </div>
    `;
  }
  
  updateStats();
}

// ë‹¨ì¼ ë²ˆí˜¸ ì„¸íŠ¸ ìƒì„±
function generateSingleNumberSet(useEvenOdd, useHotCold, useRange) {
  const numbers = [];
  const analysis = analysisResults;
  
  // 1. ì§/í™€ ë¹„ìœ¨ ê²°ì • (3:3 ë˜ëŠ” 4:2)
  let evenCount, oddCount;
  if (useEvenOdd) {
    const totalEven = analysis.evenOddRatio.even;
    const totalOdd = analysis.evenOddRatio.odd;
    const evenRatio = totalEven / (totalEven + totalOdd);
    
    if (Math.random() < evenRatio) {
      evenCount = Math.random() > 0.5 ? 3 : 4;
    } else {
      evenCount = Math.random() > 0.5 ? 2 : 3;
    }
    oddCount = 6 - evenCount;
  } else {
    evenCount = 0;
    oddCount = 0;
  }
  
  // 2. í•«/ì½œë“œ ë„˜ë²„ ì„ íƒ
  if (useHotCold) {
    const hotCount = Math.floor(Math.random() * 2) + 3; // 3~4ê°œ
    const coldCount = 6 - hotCount;
    
    const hotPool = [...analysis.hotNumbers].sort(() => 0.5 - Math.random());
    const coldPool = [...analysis.coldNumbers].sort(() => 0.5 - Math.random());
    
    // ì§ìˆ˜ í•« ë„˜ë²„
    const hotEven = hotPool.filter(n => n % 2 === 0);
    while (numbers.filter(n => n % 2 === 0).length < evenCount && hotEven.length > 0) {
      const num = hotEven.pop();
      if (!numbers.includes(num)) numbers.push(num);
    }
    
    // í™€ìˆ˜ í•« ë„˜ë²„
    const hotOdd = hotPool.filter(n => n % 2 === 1);
    while (numbers.filter(n => n % 2 === 1).length < oddCount && hotOdd.length > 0) {
      const num = hotOdd.pop();
      if (!numbers.includes(num)) numbers.push(num);
    }
    
    // ì§ìˆ˜ ì½œë“œ ë„˜ë²„
    const coldEven = coldPool.filter(n => n % 2 === 0);
    while (numbers.filter(n => n % 2 === 0).length < evenCount && coldEven.length > 0) {
      const num = coldEven.pop();
      if (!numbers.includes(num)) numbers.push(num);
    }
    
    // í™€ìˆ˜ ì½œë“œ ë„˜ë²„
    const coldOdd = coldPool.filter(n => n % 2 === 1);
    while (numbers.filter(n => n % 2 === 1).length < oddCount && coldOdd.length > 0) {
      const num = coldOdd.pop();
      if (!numbers.includes(num)) numbers.push(num);
    }
  }
  
  // 3. ë²ˆí˜¸ëŒ€ ë¶„í¬ ì¡°ì •
  if (useRange) {
    const rangeTargets = [...analysis.rangeDistribution]
      .map((count, i) => ({range: i, count}))
      .sort((a,b) => b.count - a.count)
      .slice(0, 3);
    
    rangeTargets.forEach(target => {
      const rangeStart = target.range * 10 + 1;
      const rangeEnd = rangeStart + 9;
      const needed = Math.ceil(6 * (target.count / analysis.rangeDistribution.reduce((a,b)=>a+b,0)));
      
      for (let i = 0; i < needed && numbers.length < 6; i++) {
        const num = Math.floor(Math.random() * 10) + rangeStart;
        if (!numbers.includes(num)) numbers.push(num);
      }
    });
  }
  
  // 4. ë¶€ì¡±í•œ ë²ˆí˜¸ëŠ” ëœë¤ìœ¼ë¡œ ì±„ì›€
  while (numbers.length < 6) {
    const num = Math.floor(Math.random() * 45) + 1;
    if (!numbers.includes(num)) {
      if (useEvenOdd) {
        const isEven = num % 2 === 0;
        if ((isEven && numbers.filter(n => n % 2 === 0).length < evenCount) || 
            (!isEven && numbers.filter(n => n % 2 === 1).length < oddCount)) {
          numbers.push(num);
        }
      } else {
        numbers.push(num);
      }
    }
  }
  
  return numbers.sort((a, b) => a - b);
}

// ë²ˆí˜¸ ì„¸íŠ¸ ìœ íš¨ì„± ê²€ì‚¬
function validateNumberSet(numbers, useSum, useConsecutive) {
  // 1. í•©ê³„ ê²€ì‚¬
  if (useSum) {
    const sum = numbers.reduce((a,b) => a+b, 0);
    if (sum < 100 || sum > 170) return false;
  }
  
  // 2. ì—°ì† ë²ˆí˜¸ ê²€ì‚¬
  if (useConsecutive) {
    const sorted = [...numbers].sort((a,b) => a-b);
    let consecutive = 0;
    for (let i = 1; i < sorted.length; i++) {
      if (sorted[i] === sorted[i-1] + 1) consecutive++;
      if (consecutive > 2) return false; // ì—°ì†ë²ˆí˜¸ 3ê°œ ì´ìƒ ë¶ˆê°€
    }
  }
  
  return true;
}

// ëŒ€ì²´ ë²ˆí˜¸ ìƒì„± (í•„í„° ì¡°ê±´ì„ ì¶©ì¡±í•˜ì§€ ëª»í•  ê²½ìš°)
function generateFallbackNumberSet() {
  const numbers = [];
  while (numbers.length < 6) {
    const num = Math.floor(Math.random() * 45) + 1;
    if (!numbers.includes(num)) numbers.push(num);
  }
  return numbers.sort((a, b) => a - b);
}

// [ê¸°ì¡´ì˜ saveCombinations, loadSavedCombinations, deleteCombination, clearAll, updateStats í•¨ìˆ˜ëŠ” ë™ì¼í•˜ê²Œ ìœ ì§€]
</script>
</body>
</html>

